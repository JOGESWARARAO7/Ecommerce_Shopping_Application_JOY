<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card p-4 shadow-lg rounded" style="max-width: 400px; width: 100%;">
        <h4 class="text-center mb-3 fontstyle" >Forgot Password</h4>

        <!-- Success & Error Messages -->
        <div *ngIf="successMessage" class="alert alert-success text-center">
            <i class="fa-solid fa-circle-check"></i> {{ successMessage }}
        </div>
        <div *ngIf="errorMessage" class="alert alert-danger text-center">
            <i class="fa-solid fa-triangle-exclamation"></i> {{ errorMessage }}
        </div>

        <!-- Email Input & OTP Generation -->
        <div class="mb-3">
            <label for="email" class="form-label fw-semibold">Email</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-envelope"></i></span>
                <input type="email" class="form-control" placeholder="Enter your email" id="email" [(ngModel)]="email" [disabled]="isEmailDisabled">
            </div>
            <button class="btn btn-primary mt-2 w-100 fontstyle" (click)="generateOtp()" [disabled]="!email || isEmailDisabled">
                <i class="fa-solid fa-paper-plane "></i> Generate OTP
            </button>
        </div>

        <!-- OTP Input -->
        <div class="mb-3" *ngIf="isOtpGenerated">
            <label for="otp" class="form-label fw-semibold">Enter OTP</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-key"></i></span>
                <input type="number" class="form-control" placeholder="Enter OTP" id="otp" [(ngModel)]="otp" [disabled]="isOtpVerified">
            </div>
            <button class="btn btn-success mt-2 w-100 fontstyle" (click)="verifyOtp()" [disabled]="!otp || isOtpVerified">
                <i class="fa-solid fa-check"></i> Verify OTP
            </button>
        </div>

        <!-- New Password Inputs -->
        <div class="mb-3" *ngIf="isOtpVerified">
            <label for="newPassword" class="form-label fw-semibold">New Password</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                <input type="password" class="form-control" placeholder="Enter new password" id="newPassword" [(ngModel)]="newPassword">
            </div>

            <label for="confirmPassword" class="form-label fw-semibold mt-2">Confirm Password</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
                <input type="password" class="form-control" placeholder="Confirm password" id="confirmPassword" [(ngModel)]="confirmPassword">
            </div>

            <button class="btn btn-warning mt-3 w-100 fontstyle" (click)="updatePassword()" 
                [disabled]="!newPassword || !confirmPassword || newPassword !== confirmPassword">
                <i class="fa-solid fa-pen"></i> Update Password
            </button>
        </div>

        <!-- Login Link -->
        <div class="text-center mt-3 fontstyle">
            <a routerLink="/userloginpage" class="text-decoration-none text-primary fw-semibold">
                <i class="fa-solid fa-arrow-left"></i> Back to Login
            </a>
        </div>
    </div>
</div>
